window.onload=function(){$("div.alert").delay(4e3).fadeOut(350),[].slice.call(document.querySelectorAll("[data-bs-toggle='tooltip']")).map((function(t){return new bootstrap.Tooltip(t,{html:!0})})),[].slice.call(document.querySelectorAll("[data-bs-toggle='popover']")).map((function(t){return new bootstrap.Popover(t,{})}))},window.SPMaskBehavior=function(t){return 11===t.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009"},spOptions={onKeyPress:function(t,e,n,a){n.mask(SPMaskBehavior.apply({},arguments),a)}},window.isInvalidText=function(t,e){var n=$(t).val(),a=!1;return null===n||n.length<e?(a=!0,$(t).addClass("is-invalid")):$(t).removeClass("is-invalid"),a},window.isInvalidNumber=function(t,e){var n=$(t).val(),a=!1;try{n=parseFloat(n)}catch(e){return a=!0,$(t).addClass("is-invalid"),a}return n<=e||isNaN(n)?(a=!0,$(t).addClass("is-invalid")):$(t).removeClass("is-invalid"),a},window.isValidInput=function(t,e){return $(t).val()&&$(t).val().length>=e?($(t).removeClass("is-invalid"),!0):($(t).addClass("is-invalid"),!1)},window.isValidCEP=function(t){return $(t).val()&&$(t).val().length==="00000-000".length?($(t).removeClass("is-invalid"),!0):($(t).addClass("is-invalid"),!1)},window.convertHex=function(t,e){var n=t.replace("#","");return 3===n.length&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),"rgba("+parseInt(n.substring(0,2),16)+","+parseInt(n.substring(2,4),16)+","+parseInt(n.substring(4,6),16)+","+e/100+")"},(()=>{function t(t,e){t=new Date(parseInt(t));var n=parseInt(t.getMonth())+1;n=1==n.toString().length?"0"+n.toString():n.toString();var a=t.getFullYear();return t="en-us"===e?"".concat(a,"-").concat(n):"".concat(n,"/").concat(a)}function e(t,e){var n=t.id.split("-")[2];document.querySelector("#contract-account-".concat(n)).value=JSON.stringify(e),document.querySelector("#contract-account-bill-".concat(n)).submit()}$(document).ready((function(){$("#table_id").DataTable({bPaginate:!1,info:!1,language:{lengthMenu:"Visualizar _MENU_ itens por página",zeroRecords:"Sem Informações",infoEmpty:"Sem Informações",infoFiltered:"",search:"Pesquisar"}});var e=document.querySelector("#open-modal-client-bills");0===arrContractAccounts.length?e.setAttribute("disabled",!0):e.removeAttribute("disabled");var n=Date.now();document.querySelectorAll("input[id^='contract-account-date']").forEach((function(e){var a=t(n-31536e7,"en-us");e.setAttribute("min",a);var o=t(n+2592e6,"en-us");e.setAttribute("max",o)}))})),window.deleteClientContractAccountBill=function(t,e,n){var a=t.id.split("-")[4],o=document.querySelector("#btn-client-delete-bill-loading-".concat(a)),s=document.querySelector("#btn-icon-".concat(a)),i={user:e,password:n};t.setAttribute("disabled",!0),o.classList.remove("d-none"),s.classList.add("d-none"),$.ajax({headers:{"X-CSRF-TOKEN":$("meta[name='csrf-token']").attr("content"),Accept:"application/json","Content-Type":"application/json"},url:"http://equatorial.sunnyhouse.com.br/listAccountContracts",type:"POST",dataType:"json",data:JSON.stringify(i),success:function(a){a.data.login=e,a.data.password=n,t.removeAttribute("disabled"),o.classList.add("d-none"),s.classList.remove("d-none"),function(t,e){var n=t.id.split("-")[4];document.querySelector("#client-contract-accounts-".concat(n)).value=JSON.stringify(e),document.querySelector("#form-client-delete-bill-".concat(n)).submit()}(t,a.data)},error:function(e){var n=document.querySelector("#modal-show-client-bills .modal-body");t.removeAttribute("disabled"),o.classList.add("d-none"),s.classList.remove("d-none"),500===e.status?n.insertAdjacentHTML("afterbegin",'\n                    <div class="alert alert-danger alert-dismissible show fade mt-0 mb-0 ms-auto me-auto" \n                        style="max-width: 576px;">\n                        <strong>Credenciais do cliente inválidas.</strong>\n                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>\n                    </div>\n                '):0===e.status&&n.insertAdjacentHTML("afterbegin",'\n                    <div class="alert alert-danger alert-dismissible show fade mt-0 mb-0 ms-auto me-auto" \n                        style="max-width: 576px;">\n                        <strong>Serviço indisponível no momento. Tente novamente mais tarde.</strong>\n                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>\n                    </div>\n                '),window.scrollTo(0,0),$("div.alert").delay(5e3).fadeOut(350)}})},window.validateBillDate=function(t){var e=t.id.split("-")[3],n=document.querySelector("#btn-account-".concat(e));""!==t.value?n.removeAttribute("disabled"):n.setAttribute("disabled",!0)},window.getContractAccount=function(t,n,a,o){var s=t.id.split("-")[2],i=document.querySelector("#loading-contract-account-".concat(s)),r=document.querySelector("#icon-file-download-".concat(s)),l=document.querySelector("#contract-account-date-".concat(s)).value,c=l.split("-")[1],d=l.split("-")[0],u=document.querySelector("#contract-account-info-".concat(s," td:nth-child(2)")).innerText,m=billContractAccounts.filter((function(t){var e=t.split("_")[0],n=t.split("_")[1];if(u.includes(e)&&l===n)return!0}));if(1===m.length){var b=document.querySelectorAll("#contract-account-info-".concat(s," td")),v={data:{0:{}}};v.data[0].fileName="".concat(n,"_").concat(m[0].split("_")[0],"_").concat(c,"_").concat(d,".pdf"),v.data[0].contract_account_number=b[1].innerText,v.data[0].address=b[2].innerText,v.data[0].neighborhood=b[3].innerText,v.data[0].city=b[4].innerText,v.data[0].installation_number=b[5].innerText,v.data[0].account_month=l,t.removeAttribute("disabled"),i.classList.add("d-none"),r.classList.remove("d-none"),e(t,v.data)}else{var p="http://equatorial.sunnyhouse.com.br/extractBills?accountContract=".concat(o,"&month=").concat(c,"&year=").concat(d),f={user:n,password:a};t.setAttribute("disabled",!0),i.classList.remove("d-none"),r.classList.add("d-none"),$.ajax({headers:{"X-CSRF-TOKEN":$("meta[name='csrf-token']").attr("content"),Accept:"application/json","Content-Type":"application/json"},url:p,type:"POST",dataType:"json",data:JSON.stringify(f),success:function(n){var a=document.querySelector(".page-title");if(t.removeAttribute("disabled"),i.classList.add("d-none"),r.classList.remove("d-none"),0===n.data.length)a.insertAdjacentHTML("afterend",'\n                        <div class="alert alert-danger alert-dismissible show fade">\n                            <strong>Não há fatura para o mês selecionado.</strong>\n                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>\n                        </div>\n                    '),window.scrollTo(0,0),$("div.alert").delay(5e3).fadeOut(350);else{var o=document.querySelectorAll("#contract-account-info-".concat(s," td"));n.data[0].contract_account_number=o[1].innerText,n.data[0].address=o[2].innerText,n.data[0].neighborhood=o[3].innerText,n.data[0].city=o[4].innerText,n.data[0].installation_number=o[5].innerText,n.data[0].account_month=l,e(t,n.data)}},error:function(e){var n=document.querySelector(".page-title");t.removeAttribute("disabled"),i.classList.add("d-none"),r.classList.remove("d-none"),500===e.status?n.insertAdjacentHTML("afterend",'\n                        <div class="alert alert-danger alert-dismissible show fade">\n                            <strong>Credenciais inválidas.</strong>\n                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>\n                        </div>\n                    '):0===e.status&&n.insertAdjacentHTML("afterend",'\n                        <div class="alert alert-danger alert-dismissible show fade">\n                            <strong>Serviço indisponível no momento. Tente novamente mais tarde.</strong>\n                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>\n                        </div>\n                    '),window.scrollTo(0,0),$("div.alert").delay(5e3).fadeOut(350)}})}}})();
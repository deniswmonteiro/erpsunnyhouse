window.onload=function(){$("div.alert").delay(4e3).fadeOut(350),[].slice.call(document.querySelectorAll("[data-bs-toggle='tooltip']")).map((function(n){return new bootstrap.Tooltip(n,{html:!0})})),[].slice.call(document.querySelectorAll("[data-bs-toggle='popover']")).map((function(n){return new bootstrap.Popover(n,{})}))},window.SPMaskBehavior=function(n){return 11===n.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009"},spOptions={onKeyPress:function(n,t,c,i){c.mask(SPMaskBehavior.apply({},arguments),i)}},window.isInvalidText=function(n,t){var c=$(n).val(),i=!1;return null===c||c.length<t?(i=!0,$(n).addClass("is-invalid")):$(n).removeClass("is-invalid"),i},window.isInvalidNumber=function(n,t){var c=$(n).val(),i=!1;try{c=parseFloat(c)}catch(t){return i=!0,$(n).addClass("is-invalid"),i}return c<=t||isNaN(c)?(i=!0,$(n).addClass("is-invalid")):$(n).removeClass("is-invalid"),i},window.isValidInput=function(n,t){return $(n).val()&&$(n).val().length>=t?($(n).removeClass("is-invalid"),!0):($(n).addClass("is-invalid"),!1)},window.isValidCEP=function(n){return $(n).val()&&$(n).val().length==="00000-000".length?($(n).removeClass("is-invalid"),!0):($(n).addClass("is-invalid"),!1)},window.convertHex=function(n,t){var c=n.replace("#","");return 3===c.length&&(c=c[0]+c[0]+c[1]+c[1]+c[2]+c[2]),"rgba("+parseInt(c.substring(0,2),16)+","+parseInt(c.substring(2,4),16)+","+parseInt(c.substring(4,6),16)+","+t/100+")"},window.addApportionmentListBeneficiary=function(n){n.setAttribute("disabled",!0);var t=n.id.split("-")[4],c=n.id.split("-")[1],i=document.querySelector("#new-apportionment-list-".concat(t)).id,e=document.querySelector("#".concat(i," #cc-beneficiaries-").concat(t)),a=document.querySelectorAll("#".concat(e.id," [data-").concat(c,"-beneficiary-item]")),o=Number(a[a.length-1].id.split("-")[3])+1;n.closest(".row").insertAdjacentHTML("beforebegin",'\n            <div class="accordion-item" \n                id="'.concat(c,"-beneficiary-").concat(t.toString(),"-").concat(o.toString(),'"\n                data-').concat(c,'-beneficiary-item>\n                <h2 class="accordion-header d-flex" \n                    id="').concat(c,"-beneficiary-heading-").concat(t.toString(),"-").concat(o.toString(),'">\n                    <button type="button" class="accordion-button fw-bold rounded-0 rounded-start bg-light bg-gradient text-primary" \n                        data-bs-toggle="collapse" \n                        data-bs-target="#').concat(c,"-beneficiary-collapse-").concat(t.toString(),"-").concat(o.toString(),'" aria-expanded="true"\n                        aria-controls="').concat(c,"-beneficiary-collapse-").concat(t.toString(),"-").concat(o.toString(),'">\n                        Beneficiária ').concat(o.toString(),'\n                    </button>\n                    <button type="button" class="btn btn-danger rounded-0 rounded-end"\n                        id="btn-').concat(c,"-remove-beneficiary-item-").concat(t.toString(),"-").concat(o.toString(),'"\n                        onclick="return window.removeBeneficiaryItem(this)">\n                        <i class="bi bi-trash-fill"></i>\n                    </button>\n                </h2>\n                <div id="').concat(c,"-beneficiary-collapse-").concat(t.toString(),"-").concat(o.toString(),'"\n                    class="accordion-collapse collapse show" \n                    aria-labelledby="').concat(c,"-beneficiary-heading-").concat(t.toString(),"-").concat(o.toString(),'"\n                    data-bs-parent="#cc-beneficiaries-').concat(t.toString(),'">\n                    <div class="accordion-body">\n                        <div class="d-none"\n                            id="').concat(c,"-beneficiary-client-").concat(t.toString(),"-").concat(o.toString(),'">\n                            <div class="row mt-3">\n                                <div class="col-12 mb-4">\n                                    <div class="form-check">\n                                        <input class="form-check-input" type="checkbox"\n                                            id="').concat(c,"-chk-add-beneficiary-client-").concat(t.toString(),"-").concat(o.toString(),'" name="chk-add-beneficiary-client"\n                                            onchange="return window.checkIfAddClientBeneficiary(this)">\n                                        <label for="').concat(c,"-chk-add-beneficiary-client-").concat(t.toString(),"-").concat(o.toString(),'" class="form-check-label">\n                                            Cliente diferente da Geradora?\n                                        </label>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="row">\n                                \x3c!-- Beneficiary Client --\x3e\n                                <div class="col-12 col-md-6 mb-3 d-none" \n                                    id="').concat(c,"-client-beneficiary-").concat(t.toString(),"-").concat(o.toString(),'">\n                                    <div class="form-group">\n                                        <label for="').concat(c,"-project-beneficiary-client-").concat(t.toString(),"-").concat(o.toString(),'" class="form-label">\n                                            Cliente\n                                        </label>\n                                        <input class="form-control" type="text"\n                                            id="').concat(c,"-project-beneficiary-client-").concat(t.toString(),"-").concat(o.toString(),'" name="beneficiaries[address-').concat(o.toString(),'][beneficiary-client]"\n                                            onfocus="return window.autocomplete(this, clients)">\n                                        <div class="invalid-feedback"\n                                            id="').concat(c,"-client-beneficiary-").concat(t.toString(),"-").concat(o.toString(),'-feedback-project"></div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row">\n                            \x3c!-- Beneficiary Contract Account --\x3e\n                            <div class="col-12 col-md-6 mb-3">\n                                <div id="').concat(c,"-beneficiary-contract-account-input-").concat(t.toString(),"-").concat(o.toString(),'">\n                                    <div class="form-group">\n                                        <label for="').concat(c,"-cc-beneficiary-input-").concat(t.toString(),"-").concat(o.toString(),'" class="form-label">\n                                            Conta Contrato Beneficiária\n                                        </label>\n                                        <input class="form-control" type="text" \n                                            id="').concat(c,"-cc-beneficiary-input-").concat(t.toString(),"-").concat(o.toString(),'"\n                                            name="beneficiaries[address-').concat(o.toString(),'][beneficiary-contract-account]"\n                                            onchange="return window.validateInput(this, 1), window.enableBtnAddBeneficiary(this)"\n                                            onblur="return window.validateInput(this, 1)"\n                                            onkeyup="return window.validateInput(this, 1)"\n                                            maxlength="12"\n                                            data-beneficiary\n                                            required>\n                                        <div class="invalid-feedback" \n                                            id="').concat(c,"-cc-beneficiary-input-").concat(t.toString(),"-").concat(o.toString(),'-feedback-project"></div>\n                                    </div>\n                                </div>\n                                <div id="').concat(c,"-beneficiary-contract-account-select-").concat(t.toString(),"-").concat(o.toString(),'">\n                                    <div class="form-group">\n                                        <label for="').concat(c,"-cc-beneficiary-select-").concat(t.toString(),"-").concat(o.toString(),'" class="form-label">\n                                            Conta Contrato Beneficiária\n                                        </label>\n                                        <select class="form-select" \n                                            aria-label="').concat(c,"-cc-beneficiary-select-").concat(t.toString(),"-").concat(o.toString(),'"\n                                            id="').concat(c,"-cc-beneficiary-select-").concat(t.toString(),"-").concat(o.toString(),'"\n                                            name="beneficiaries[address-').concat(o.toString(),'][beneficiary-contract-account]"\n                                            onchange="return window.validateSelect(this, 1), window.enableBtnAddBeneficiary(this), window.setDifferentBeneficiaryContractAccount(this)"\n                                            onblur="return window.validateSelect(this, 1), window.setDifferentBeneficiaryContractAccount(this)"\n                                            required>\n                                            <option value="" disabled selected>\n                                                Selecione a conta contrato\n                                            </option>\n                                        </select>\n                                        <div class="invalid-feedback"\n                                            id="').concat(c,"-cc-beneficiary-select-").concat(t.toString(),"-").concat(o.toString(),'-feedback-project"></div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            \x3c!-- Other beneficiary contract account --\x3e\n                            <div class="col-12 col-md-6 mb-3 d-none"\n                                id="').concat(c,"-other-beneficiary-contract-account-").concat(t.toString(),"-").concat(o.toString(),'">\n                                <div class="form-group">\n                                    <label for="').concat(c,"-other-cc-beneficiary-").concat(t.toString(),"-").concat(o.toString(),'" class="form-label">\n                                        Outra Conta Contrato Beneficiária\n                                    </label>\n                                    <input class="form-control" type="text" \n                                        id="').concat(c,"-other-cc-beneficiary-").concat(t.toString(),"-").concat(o.toString(),'"\n                                        name="beneficiaries[address-').concat(o.toString(),'][beneficiary-other-contract-account]"\n                                        onchange="return window.validateInput(this, 1)"\n                                        onblur="return window.validateInput(this, 1)"\n                                        onkeyup="return window.validateInput(this, 1)"\n                                        maxlength="12">\n                                    <div class="invalid-feedback" \n                                        id="').concat(c,"-cc-other-beneficiary-").concat(t.toString(),"-").concat(o.toString(),'-feedback-project">\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row">\n                            \x3c!-- Consumption Class --\x3e\n                            <div class="col-12 col-md-6 mb-3">\n                                <div class="form-group">\n                                    <label for="').concat(c,"-beneficiary-consumption-class-").concat(t.toString(),"-").concat(o.toString(),'" class="form-label">\n                                        Classe de Consumo\n                                    </label>\n                                    <select class="form-select" \n                                        aria-label="').concat(c,'-beneficiary-consumption-class"\n                                        id="').concat(c,"-beneficiary-consumption-class-").concat(t.toString(),"-").concat(o.toString(),'" name="beneficiaries[address-').concat(o.toString(),'][beneficiary-consumption-class]"\n                                        onchange="return window.validateSelect(this), window.enableBtnAddBeneficiary(this)"\n                                        onblur="return window.validateSelect(this)"\n                                        data-beneficiary\n                                        required>\n                                        <option value="" disabled selected>\n                                            Escolha a classe de consumo\n                                        </option>\n                                        <option value="').concat(beneficiaryConsumptionClassIndex1,'">\n                                            Residencial\n                                        </option>\n                                        <option value="').concat(beneficiaryConsumptionClassIndex2,'">\n                                            Industrial\n                                        </option>\n                                        <option value="').concat(beneficiaryConsumptionClassIndex3,'">\n                                            Comércio, Serviço e outras atividades\n                                        </option>\n                                        <option value="').concat(beneficiaryConsumptionClassIndex4,'">\n                                            Rural\n                                        </option>\n                                        <option value="').concat(beneficiaryConsumptionClassIndex5,'">\n                                            Poder Público\n                                        </option>\n                                        <option value="').concat(beneficiaryConsumptionClassIndex6,'">\n                                            Iluminação Pública\n                                        </option>\n                                        <option value="').concat(beneficiaryConsumptionClassIndex7,'">\n                                            Serviço Público\n                                        </option>\n                                        <option value="').concat(beneficiaryConsumptionClassIndex8,'">\n                                            Consumo Próprio\n                                        </option>\n                                    </select>\n                                    <div class="invalid-feedback" \n                                        id="').concat(c,"-beneficiary-consumption-class-").concat(t.toString(),"-").concat(o.toString(),'-feedback-project">\n                                    </div>\n                                </div>\n                            </div>\n\n                            \x3c!-- Rate --\x3e\n                            <div class="col-12 col-md-6 mb-3">\n                                <div class="form-group">\n                                    <label for="').concat(c,"-project-beneficiary-rate-").concat(t.toString(),"-").concat(o.toString(),'" class="form-label">\n                                        Rateio\n                                    </label>\n                                    <div class="input-group">\n                                        <input class="form-control" type="text"\n                                            id="').concat(c,"-project-beneficiary-rate-").concat(t.toString(),"-").concat(o.toString(),'"\n                                            name="beneficiaries[address-').concat(o.toString(),'][beneficiary-rate]"\n                                            onchange="return window.handleBeneficiaryRate(this), window.validateInput(this, 1), window.validateBeneficiaryRate(this), window.enableBtnAddBeneficiary(this)"\n                                            onblur="return window.handleBeneficiaryRate(this), window.validateInput(this, 1), window.validateBeneficiaryRate(this)"\n                                            onkeyup="return window.handleBeneficiaryRate(this), window.validateInput(this, 1), window.validateBeneficiaryRate(this)"\n                                            data-beneficiary\n                                            required>\n                                        <span class="input-group-text rounded-end">%</span>\n                                        <span class="input-group-text bg-secondary text-white ms-4 rounded" \n                                            id="').concat(c,"-rate-monthly-avg-generation-").concat(t.toString(),"-").concat(o.toString(),'">\n                                        </span>\n                                    </div>\n                                    <div class="invalid-feedback" \n                                        id="').concat(c,"-beneficiary-rate-").concat(t.toString(),"-").concat(o.toString(),'-feedback-project">\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row">\n                            \x3c!-- Address --\x3e\n                            <div class="col-12 mb-3">\n                                <div class="form-group">\n                                    <label for="').concat(c,"-project-beneficiary-address-").concat(t.toString(),"-").concat(o.toString(),'" class="form-label">\n                                        Endereço\n                                    </label>\n                                    <input class="form-control" type="text"\n                                        id="').concat(c,"-project-beneficiary-address-").concat(t.toString(),"-").concat(o.toString(),'" name="beneficiaries[address-').concat(o.toString(),'][beneficiary-address]"\n                                        onchange="return window.validateInput(this, 2), window.enableBtnAddBeneficiary(this)"\n                                        onblur="return window.validateInput(this, 2)"\n                                        onkeyup="return window.validateInput(this, 2)"\n                                        data-beneficiary\n                                        required>\n                                    <div class="invalid-feedback" \n                                        id="').concat(c,"-beneficiary-address-").concat(t.toString(),"-").concat(o.toString(),'-feedback-project"></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ')),$("#".concat(c,"-cc-beneficiary-input-").concat(t.toString(),"-").concat(o.toString())).mask("0#"),$("#".concat(c,"-other-cc-beneficiary-").concat(t.toString(),"-").concat(o.toString())).mask("0#"),$("#".concat(c,"-project-beneficiary-rate-").concat(t.toString(),"-").concat(o.toString())).mask("##9V##",{translation:{V:{pattern:/[\,]/},"#":{pattern:/[0-9]/,optional:!0}}});var r=document.querySelector("#apportionment-list-generator-client-".concat(t.toString())),d=document.querySelector("#".concat(c,"-beneficiary-client-").concat(t.toString(),"-").concat(o.toString())),l=document.querySelector("#".concat(e.id," #").concat(c,"-project-beneficiary-rate-").concat(t.toString(),"-").concat(o.toString())),s=document.querySelectorAll("#".concat(e.id,' input[id^="').concat(c,'-project-beneficiary-rate"]')),u=Array.from(s).reduce((function(n,t){return n+Number(t.value.replace(",","."))}),0);window.getBeneficiaryClientCredentials(r,o.toString(),c),window.handleGeneratorProjectType(d),l.value=(100-u).toLocaleString("pt-br",{maximumFractionDigits:2}),window.validateBeneficiaryRate(l),window.handleBeneficiaryRate(l)};
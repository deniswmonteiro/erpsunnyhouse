(()=>{var e={7757:(e,t,n)=>{e.exports=n(5666)},5666:e=>{var t=function(e){"use strict";var t,n=Object.prototype,o=n.hasOwnProperty,c="function"==typeof Symbol?Symbol:{},r=c.iterator||"@@iterator",a=c.asyncIterator||"@@asyncIterator",i=c.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var c=t&&t.prototype instanceof v?t:v,r=Object.create(c.prototype),a=new C(o||[]);return r._invoke=function(e,t,n){var o=s;return function(c,r){if(o===f)throw new Error("Generator is already running");if(o===m){if("throw"===c)throw r;return T()}for(n.method=c,n.arg=r;;){var a=n.delegate;if(a){var i=L(a,n);if(i){if(i===y)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===s)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var d=l(e,t,n);if("normal"===d.type){if(o=n.done?m:p,d.arg===y)continue;return{value:d.arg,done:n.done}}"throw"===d.type&&(o=m,n.method="throw",n.arg=d.arg)}}}(e,n,a),r}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var s="suspendedStart",p="suspendedYield",f="executing",m="completed",y={};function v(){}function h(){}function g(){}var w={};d(w,r,(function(){return this}));var b=Object.getPrototypeOf,S=b&&b(b(k([])));S&&S!==n&&o.call(S,r)&&(w=S);var q=g.prototype=v.prototype=Object.create(w);function x(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function n(c,r,a,i){var d=l(e[c],e,r);if("throw"!==d.type){var u=d.arg,s=u.value;return s&&"object"==typeof s&&o.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,i)}),(function(e){n("throw",e,a,i)})):t.resolve(s).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,i)}))}i(d.arg)}var c;this._invoke=function(e,o){function r(){return new t((function(t,c){n(e,o,t,c)}))}return c=c?c.then(r,r):r()}}function L(e,n){var o=e.iterator[n.method];if(o===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,L(e,n),"throw"===n.method))return y;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var c=l(o,e.iterator,n.arg);if("throw"===c.type)return n.method="throw",n.arg=c.arg,n.delegate=null,y;var r=c.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function k(e){if(e){var n=e[r];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var c=-1,a=function n(){for(;++c<e.length;)if(o.call(e,c))return n.value=e[c],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:T}}function T(){return{value:t,done:!0}}return h.prototype=g,d(q,"constructor",g),d(g,"constructor",h),h.displayName=d(g,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,d(e,i,"GeneratorFunction")),e.prototype=Object.create(q),e},e.awrap=function(e){return{__await:e}},x(j.prototype),d(j.prototype,a,(function(){return this})),e.AsyncIterator=j,e.async=function(t,n,o,c,r){void 0===r&&(r=Promise);var a=new j(u(t,n,o,c),r);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(q),d(q,i,"Generator"),d(q,r,(function(){return this})),d(q,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},e.values=k,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function c(o,c){return i.type="throw",i.arg=e,n.next=o,c&&(n.method="next",n.arg=t),!!c}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],i=a.completion;if("root"===a.tryLoc)return c("end");if(a.tryLoc<=this.prev){var d=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(d&&u){if(this.prev<a.catchLoc)return c(a.catchLoc,!0);if(this.prev<a.finallyLoc)return c(a.finallyLoc)}else if(d){if(this.prev<a.catchLoc)return c(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return c(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var c=this.tryEntries[n];if(c.tryLoc<=this.prev&&o.call(c,"finallyLoc")&&this.prev<c.finallyLoc){var r=c;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var c=o.arg;E(n)}return c}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,o){return this.delegate={iterator:k(e),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),y}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}},t={};function n(o){var c=t[o];if(void 0!==c)return c.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),window.onload=function(){$("div.alert").delay(4e3).fadeOut(350),[].slice.call(document.querySelectorAll("[data-bs-toggle='tooltip']")).map((function(e){return new bootstrap.Tooltip(e,{html:!0})})),[].slice.call(document.querySelectorAll("[data-bs-toggle='popover']")).map((function(e){return new bootstrap.Popover(e,{})}))},window.SPMaskBehavior=function(e){return 11===e.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009"},spOptions={onKeyPress:function(e,t,n,o){n.mask(SPMaskBehavior.apply({},arguments),o)}},window.isInvalidText=function(e,t){var n=$(e).val(),o=!1;return null===n||n.length<t?(o=!0,$(e).addClass("is-invalid")):$(e).removeClass("is-invalid"),o},window.isInvalidNumber=function(e,t){var n=$(e).val(),o=!1;try{n=parseFloat(n)}catch(t){return o=!0,$(e).addClass("is-invalid"),o}return n<=t||isNaN(n)?(o=!0,$(e).addClass("is-invalid")):$(e).removeClass("is-invalid"),o},window.isValidInput=function(e,t){return $(e).val()&&$(e).val().length>=t?($(e).removeClass("is-invalid"),!0):($(e).addClass("is-invalid"),!1)},window.isValidCEP=function(e){return $(e).val()&&$(e).val().length==="00000-000".length?($(e).removeClass("is-invalid"),!0):($(e).addClass("is-invalid"),!1)},window.convertHex=function(e,t){var n=e.replace("#","");return 3===n.length&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),"rgba("+parseInt(n.substring(0,2),16)+","+parseInt(n.substring(2,4),16)+","+parseInt(n.substring(4,6),16)+","+t/100+")"},(()=>{"use strict";var e=n(7757),t=n.n(e);function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,c,r=[],a=!0,i=!1;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){i=!0,c=e}finally{try{a||null==n.return||n.return()}finally{if(i)throw c}}return r}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t,n,o,c,r,a){try{var i=e[r](a),d=i.value}catch(e){return void n(e)}i.done?t(d):Promise.resolve(d).then(o,c)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(o,c){var r=e.apply(t,n);function a(e){i(r,o,c,a,d,"next",e)}function d(e){i(r,o,c,a,d,"throw",e)}a(void 0)}))}}function u(){return(u=d(t().mark((function e(n,o,r,a){var i,d;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(r);case 2:return i=e.sent,e.next=5,i.json();case 5:d=e.sent,i.ok?(n.classList.remove("d-none"),n.parentNode.style.paddingLeft="2.5em",o.classList.add("d-none"),a.forEach((function(e){for(var t=0,n=Object.entries(d.address);t<n.length;t++){var o=c(n[t],2),r=o[0],a=o[1];e.id.split("-")[1]===r&&(e.value=a.trim())}})),p(a)):l(a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){e.forEach((function(e){return e.value=""})),p(e)}function s(){null!==document.querySelector(".is-invalid")&&document.querySelector(".is-invalid").focus()}function p(e){window.validateCep(e[0]),window.validateInput(e[1],2),window.validateInput(e[2],1),window.validateInput(e[4],2),window.validateInput(e[5],2),window.validateInput(e[6],2)}function f(e,t){t?(e.classList.add("is-valid"),e.classList.remove("is-invalid")):(e.classList.add("is-invalid"),e.classList.remove("is-valid"))}function m(e,t){t?(e.classList.add("valid-feedback"),e.classList.remove("invalid-feedback"),e.style.display="block"):(e.classList.add("invalid-feedback"),e.classList.remove("valid-feedback"),e.style.display="block")}$(document).ready((function(){var e=document.querySelectorAll("input[id^='edit-generator-id']"),t=document.querySelectorAll("select[id^='project-type']"),n=document.querySelectorAll("input[id^='project-generator-client']"),o=document.querySelectorAll("h6[id^='equipment-oversizing-info']"),c=document.querySelectorAll("input[id^='edit-beneficiary-id']"),r=document.querySelectorAll("input[id^='project-beneficiary-client']"),a=document.querySelectorAll("input[id^='project-beneficiary-rate']");e.forEach((function(e){return window.getGeneratorData(e)})),t.forEach((function(e){return window.changeProjectType(e)})),n.forEach((function(e){return window.autocomplete(e,clients)})),o.forEach((function(e){return window.getOversizingInfo(e)})),c.forEach((function(e){return window.getBeneficiaryData(e)})),r.forEach((function(e){return window.autocomplete(e,clients)})),a.forEach((function(e){window.validateBeneficiaryRate(e),window.handleBeneficiaryRate(e)})),document.querySelector("#project-observation").innerHTML=observations.replace(/<br>/g,"\r\n"),$("input[id^='project-other-cc-generator']").mask("0#"),$("input[id^='project-generator-consumption']").mask("#####9V##",{translation:{V:{pattern:/[\,]/},"#":{pattern:/[0-9]/,optional:!0}}}),$("input[id^='project-cc-beneficiary-input']").mask("0#"),$("input[id^='project-other-cc-beneficiary']").mask("0#"),$("input[id^='project-beneficiary-rate']").mask("##9V##",{translation:{V:{pattern:/[\,]/},"#":{pattern:/[0-9]/,optional:!0}}})})),window.autocomplete=function(e,t){var n,o=!1;function c(e){if(!e)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autocomplete-active")}(e),n>=e.length&&(n=0),n<0&&(n=e.length-1),e[n].classList.add("autocomplete-active")}function r(t){for(var n=document.getElementsByClassName("autocomplete-items"),o=0;o<n.length;o++)t!=n[o]&&t!=e&&n[o].parentNode.removeChild(n[o])}$("#".concat(e.id)).on("input",(function(c){var a,i,d,u=this.value;if(o=!1,r(),!u)return $("#new_".concat(e.id)).show(),$("#".concat(e.id)).addClass("is-invalid"),$("#".concat(e.id)).next().text("Preencha o campo."),$("#".concat(e.id)).next().addClass("is-invalid"),!1;$("#new_".concat(e.id)).hide(),$("#".concat(e.id)).next().text(""),$("#".concat(e.id)).next().removeClass("is-invalid"),n=-1,(a=document.createElement("DIV")).setAttribute("id","autocomplete-list-".concat(e.id)),a.setAttribute("class","autocomplete-items "),"beneficiary"===e.id.split("-")[1]?a.setAttribute("style","margin-left: 66px; width:"+$("#".concat(e.id)).parent().width()+"px"):a.setAttribute("style","margin-left: 45px; width:"+$("#".concat(e.id)).parent().width()+"px"),this.parentNode.appendChild(a);var l=0;for(d=0;d<t.length;d++)if(t[d].toLowerCase().includes(u.toLowerCase())&&l<10){o=!0,l++,i=document.createElement("DIV");var s=t[d],p=new RegExp("(".concat(u,")"),"gi");i.innerHTML=s.replace(p,"<strong>$1</strong>"),i.innerHTML+='<input type="hidden" value="'.concat(t[d],'">'),i.addEventListener("click",(function(t){if(e.value=this.getElementsByTagName("input")[0].value,$("#".concat(e.id)).removeClass("is-invalid"),"generator"===e.id.split("-")[1])window.getGeneratorClientCredentials(e);else{var n=e.id.split("-")[4];window.getBeneficiaryClientCredentials(e,n)}r()})),a.appendChild(i)}t.indexOf(this.value)>=0?$("#".concat(e.id)).removeClass("is-invalid"):(o&&$("#".concat(e.id)).val()?$("#new_".concat(e.id)).hide():$("#new_".concat(e.id)).show(),$("#".concat(e.id)).addClass("is-invalid"))})),e.addEventListener("keydown",(function(t){var o=document.getElementById("autocomplete-list-".concat(e.id));o&&(o=o.getElementsByTagName("div")),n=void 0===n?-1:n,40==t.keyCode?(n++,c(o)):38==t.keyCode?(n--,c(o)):13==t.keyCode&&(t.preventDefault(),n>-1&&o&&o[n].click())})),document.addEventListener("click",(function(e){return r(e.target)}))},window.changeProjectType=function(e){var t,n,o,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=e.id.split("-")[2],i=document.querySelector("#address-".concat(a)).id,d=document.querySelector("#".concat(i," #project-cep-").concat(a)),u=document.querySelector("#".concat(i," #project-address-").concat(a)),l=document.querySelector("#".concat(i," #project-number-").concat(a)),s=document.querySelector("#".concat(i," #project-complement-").concat(a)),f=document.querySelector("#".concat(i," #project-neighborhood-").concat(a)),m=document.querySelector("#".concat(i," #project-city-").concat(a)),y=document.querySelector("#".concat(i," #project-state-").concat(a)),v=[d,u,l,s,f,m,y],h=document.querySelector("#".concat(i," #generator-contract-account-select-").concat(a)),g=document.querySelectorAll("#".concat(i,' input[id^="project-generator-consumption"]')),w=document.querySelectorAll("#".concat(i," [data-beneficiaries]")),b=document.querySelectorAll("#".concat(i,' input[id^="project-beneficiary-rate"]')),S=document.querySelectorAll("#".concat(i,' span[id^="rate-monthly-avg-generation"]'));if(g.forEach((function(t){var n=t.closest("[data-address-item]").id.split("-")[1],c=document.querySelector("#address-".concat(n)),r=document.querySelector("#".concat(c.id," #").concat(t.id));2===e.selectedIndex?(r.closest(".input-group").parentNode.parentNode.classList.remove("d-none"),r.setAttribute("data-address",!0),o=Number(document.querySelector("#".concat(i," #generator-contracted-generation-production-").concat(n)).value.replace(".","").replace(",",".")),S.forEach((function(e){var t=document.querySelector("#".concat(c.id," #").concat(e.id)),n="".concat(e.id.split("-")[4],"-").concat(e.id.split("-")[5]);b.forEach((function(a){var i=document.querySelector("#".concat(c.id," #").concat(a.id));"".concat(a.id.split("-")[3],"-").concat(a.id.split("-")[4])===n&&null!==t&&null!==i&&(e.innerText="".concat(Number((o-r.value.replace(",","."))*a.value.replace(",",".")/100).toLocaleString("pt-BR",{maximumFractionDigits:2})," kWh"))}))}))):(r.closest(".input-group").parentNode.parentNode.classList.add("d-none"),r.removeAttribute("data-address"),o=Number(document.querySelector("#".concat(i," #generator-contracted-generation-production-").concat(n)).value.replace(".","").replace(",",".")),S.forEach((function(e){var t=document.querySelector("#".concat(c.id," #").concat(e.id)),n="".concat(e.id.split("-")[4],"-").concat(e.id.split("-")[5]);b.forEach((function(r){var a=document.querySelector("#".concat(c.id," #").concat(r.id));"".concat(r.id.split("-")[3],"-").concat(r.id.split("-")[4])===n&&null!==t&&null!==a&&(e.innerText="".concat(Number(o*r.value.replace(",",".")/100).toLocaleString("pt-BR",{maximumFractionDigits:2})," kWh"))}))})))})),4===e.selectedIndex){if($("#project-cep-".concat(a)).unmask(),$("#project-cc-generator-input-".concat(a)).unmask(),h.classList.contains("d-none"))(t=document.querySelector("#".concat(i," #project-cc-generator-input-").concat(a))).value="RESERVADO",window.validateInput(t);else{t=document.querySelector("#".concat(i," #project-cc-generator-select-").concat(a));for(var q=0;q<t.options.length;q++)n="RESERVADO"!==t.options[q].value;n&&(t.options[t.options.length]=new Option("RESERVADO","RESERVADO",!0,!0),window.validateSelect(t))}[].concat(v).forEach((function(e){return e.value="RESERVADO"})),p(v)}else if($("#project-cep-".concat(a)).mask("00000-000"),$("#project-cc-generator-input-".concat(a)).mask("0#"),0!==e.selectedIndex){if($("#project-cep-".concat(a)).mask("00000-000"),$("#project-cc-generator-input-".concat(a)).mask("0#"),h.classList.contains("d-none"))t=document.querySelector("#".concat(i," #project-cc-generator-input-").concat(a)),window.validateInput(t);else{t=document.querySelector("#".concat(i," #project-cc-generator-select-").concat(a));for(var x=0;x<t.options.length;x++)n="RESERVADO"===t.options[x].value;n&&(t.removeChild(t.options[t.options.length-1]),t.selectedIndex=0,window.validateSelect(t))}p(v)}if(w.forEach((function(t){2===e.selectedIndex||3===e.selectedIndex?t.classList.remove("d-none"):t.classList.add("d-none")})),c){var j=document.querySelector("#".concat(i," #chk-add-beneficiary-client-").concat(a,"-").concat(r)),L=document.querySelector("#".concat(i," #beneficiary-client-").concat(a,"-").concat(r)),A=document.querySelector("#".concat(i," #beneficiary-contract-account-select-").concat(a,"-").concat(r)),E=document.querySelector("#".concat(i," #beneficiary-contract-account-input-").concat(a,"-").concat(r));3===e.selectedIndex?L.classList.remove("d-none"):(L.classList.add("d-none"),j.checked=!1,window.checkIfAddClientBeneficiary(j)),h.classList.contains("d-none")?(A.classList.add("d-none"),E.classList.remove("d-none")):(A.classList.remove("d-none"),E.classList.add("d-none"))}else{var C=document.querySelectorAll("#".concat(i,' input[id^="chk-add-beneficiary-client"]')),k=document.querySelectorAll("#".concat(i,' div[id^="beneficiary-client"]')),T=document.querySelectorAll("#".concat(i,' div[id^="beneficiary-contract-account-select"]')),N=document.querySelectorAll("#".concat(i,' div[id^="beneficiary-contract-account-input"]'));k.forEach((function(t){3===e.selectedIndex?t.classList.remove("d-none"):(t.classList.add("d-none"),C.forEach((function(e){e.checked=!1,window.checkIfAddClientBeneficiary(e)}))),h.classList.contains("d-none")?(T.forEach((function(e){return e.classList.add("d-none")})),N.forEach((function(e){return e.classList.remove("d-none")}))):(T.forEach((function(e){return e.classList.remove("d-none")})),N.forEach((function(e){return e.classList.add("d-none")})))}))}},window.checkIfAddClient=function(e){var t=e.id.split("-")[4],n=e.closest("[data-address-item]").id,o=document.querySelector("#generator-client-".concat(t)),c=document.querySelector("#".concat(o.id," input")),r=document.querySelector("#generator-contract-account-select-".concat(t)),a=document.querySelector("#generator-contract-account-input-".concat(t)),i=document.querySelectorAll("#".concat(n,' div[id^="beneficiary-contract-account-select"]')),d=document.querySelectorAll("#".concat(n,' div[id^="beneficiary-contract-account-input"]')),u=document.querySelectorAll("#".concat(n,' input[id^="chk-add-beneficiary-client"]')),l=document.querySelector("#other-generator-contract-account-".concat(t));if(c.value="",e.checked?o.classList.remove("d-none"):o.classList.add("d-none"),l.classList.add("d-none"),null!==contractClientLogin&&null!==contractClientPassword){var s=document.querySelector("#project-cc-generator-select-".concat(t)),p=document.querySelectorAll("#".concat(n,' select[id^="project-cc-beneficiary-select"]'));r.classList.remove("d-none"),a.classList.add("d-none"),window.getGeneratorClientContractAccounts(s,contractClientLogin,contractClientPassword),i.forEach((function(e){u.forEach((function(t){t.checked||e.classList.remove("d-none")}))})),d.forEach((function(e){u.forEach((function(t){t.checked||e.classList.add("d-none")}))})),p.forEach((function(e){u.forEach((function(t){t.checked||window.getBeneficiaryClientContractAccounts(e,contractClientLogin,contractClientPassword)}))}))}else r.classList.add("d-none"),a.classList.remove("d-none"),i.forEach((function(e){u.forEach((function(t){t.checked||e.classList.add("d-none")}))})),d.forEach((function(e){u.forEach((function(t){t.checked||e.classList.remove("d-none")}))}))},window.getGeneratorData=function(){var e=d(t().mark((function e(n){var o,c,r,a,i,d,u,l,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={generator:n.value},e.next=3,fetch(url_fetch_get_generator_data,{method:"POST",headers:{"X-CSRF-TOKEN":$("meta[name='csrf-token']").attr("content"),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(o)});case 3:return c=e.sent,e.next=6,c.json();case 6:r=e.sent,c.ok&&(a=n.id.split("-")[3],i=document.querySelector("#project-cc-generator-select-".concat(a)),d=r.generator_data.generator_contract_account,u=r.generator_data.different_generator_contract_account,l=r.generator_data.generator_client_login,s=r.generator_data.generator_client_password,window.getGeneratorClientContractAccounts(i,l,s,d,u));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),window.getBeneficiaryData=function(){var e=d(t().mark((function e(n){var o,c,r,a,i,d,u,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={beneficiary:n.value},e.next=3,fetch(url_fetch_get_beneficiary_data,{method:"POST",headers:{"X-CSRF-TOKEN":$("meta[name='csrf-token']").attr("content"),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(o)});case 3:return c=e.sent,e.next=6,c.json();case 6:r=e.sent,c.ok&&(a=n.id.split("-")[3],i=n.id.split("-")[4],u=r.beneficiary_data.beneficiary_contract_account,l=r.beneficiary_data.different_beneficiary_contract_account,d=r.beneficiary_data.beneficiary_client?document.querySelector("#project-beneficiary-client-".concat(a,"-").concat(i)):document.querySelector("#project-generator-client-".concat(a)),window.getBeneficiaryClientCredentials(d,i,u,l));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),window.getGeneratorClientCredentials=function(){var e=d(t().mark((function e(n){var o,c,r,a,i,d,u,l,s,p,f,m,y,v,h;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.id.split("-")[3],c=n.closest("[data-address-item]").id,r=document.querySelector("#generator-contract-account-select-".concat(o)),a=document.querySelector("#generator-contract-account-input-".concat(o)),i=document.querySelector("#project-cc-generator-select-".concat(o)),d=document.querySelectorAll("#".concat(c,' div[id^="beneficiary-contract-account-select"]')),u=document.querySelectorAll("#".concat(c,' div[id^="beneficiary-contract-account-input"]')),l=document.querySelectorAll("#".concat(c,' select[id^="project-cc-beneficiary-select"]')),s=document.querySelectorAll("#".concat(c,' input[id^="chk-add-beneficiary-client"]')),p=document.querySelector("#".concat(c,' div[id^="other-generator-contract-account"]')),f={name:n.value},e.next=13,fetch(url_ajax_get_client_credentials,{method:"POST",headers:{"X-CSRF-TOKEN":$("meta[name='csrf-token']").attr("content"),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(f)});case 13:return m=e.sent,e.next=16,m.json();case 16:if(y=e.sent,p.classList.add("d-none"),m.ok)if(v=y.client.login,h=y.client.password,null!==v&&null!==h){for(r.classList.remove("d-none"),a.classList.add("d-none");i.options.length>0;)i.remove(0);(i.options[i.options.length]=new Option("Selecione a conta contrato","",!0,!0)).setAttribute("disabled",!0),window.getGeneratorClientContractAccounts(i,v,h),l.forEach((function(e){s.forEach((function(t){if(!t.checked&&t.id.split("-")[5]===e.id.split("-")[5]){for(;e.options.length>0;)e.remove(0);(e.options[e.options.length]=new Option("Selecione a conta contrato","",!0,!0)).setAttribute("disabled",!0),window.getBeneficiaryClientContractAccounts(e,v,h)}}))}))}else r.classList.add("d-none"),a.classList.remove("d-none"),i.value="RESERVADO",window.validateInput(i),d.forEach((function(e){s.forEach((function(t){t.checked||e.classList.add("d-none")}))})),u.forEach((function(e){s.forEach((function(t){t.checked||e.classList.remove("d-none")}))}));else r.classList.add("d-none"),a.classList.remove("d-none"),d.forEach((function(e){s.forEach((function(t){t.checked||e.classList.add("d-none")}))})),u.forEach((function(e){s.forEach((function(t){t.checked||e.classList.remove("d-none")}))}));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),window.getBeneficiaryClientCredentials=function(){var e=d(t().mark((function e(n,o){var c,r,a,i,d,u,l,s,p,f,m,y,v=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=v.length>2&&void 0!==v[2]?v[2]:null,r=v.length>3&&void 0!==v[3]?v[3]:null,null===n||null===c){e.next=17;break}return a=n.id.split("-")[3],i=document.querySelector("#beneficiary-contract-account-select-".concat(a,"-").concat(o)),d=document.querySelector("#beneficiary-contract-account-input-".concat(a,"-").concat(o)),u=document.querySelector("#project-cc-beneficiary-select-".concat(a,"-").concat(o)),l=document.querySelector("#other-beneficiary-contract-account-".concat(a,"-").concat(o)),s={name:n.value},e.next=11,fetch(url_ajax_get_client_credentials,{method:"POST",headers:{"X-CSRF-TOKEN":$("meta[name='csrf-token']").attr("content"),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(s)});case 11:return p=e.sent,e.next=14,p.json();case 14:if(f=e.sent,l.classList.add("d-none"),p.ok)if(m=f.client.login,y=f.client.password,null!==m&&null!==y){for(i.classList.remove("d-none"),d.classList.add("d-none");u.options.length>0;)u.remove(0);(u.options[u.options.length]=new Option("Selecione a conta contrato","",!0,!0)).setAttribute("disabled",!0),window.getBeneficiaryClientContractAccounts(u,m,y,c,r)}else i.classList.add("d-none"),d.classList.remove("d-none");else i.classList.add("d-none"),d.classList.remove("d-none");case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),window.getGeneratorClientContractAccounts=function(){var e=d(t().mark((function e(n,o,c){var r,a,i,d,u,l,s,p,f,m,y,v,h,g,w,b,S,q,x=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=x.length>3&&void 0!==x[3]?x[3]:null,a=x.length>4&&void 0!==x[4]?x[4]:null,null===n||null===o||null===c){e.next=21;break}for(i=n.id.split("-")[4],d=document.querySelector("#project-type-".concat(i)),u=document.querySelector("#generator-contract-account-select-".concat(i)),l=document.querySelector("#generator-contract-account-input-".concat(i)),s=document.querySelector("#project-cc-generator-select-".concat(i)),f="http://equatorial.sunnyhouse.com.br/listAccountContracts",m={user:o,password:c},s.setAttribute("disabled",!0);s.options.length>0;)s.remove(0);return(s.options[s.options.length]=new Option("Carregando...","",!0,!0)).setAttribute("disabled",!0),e.next=16,fetch(f,{method:"POST",headers:{"X-CSRF-TOKEN":$("meta[name='csrf-token']").attr("content"),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(m)});case 16:return y=e.sent,e.next=19,y.json();case 19:if(v=e.sent,y.ok){for(v.data.login=o,v.data.password=c,s.removeAttribute("disabled");s.options.length>0;)s.remove(0);for((s.options[s.options.length]=new Option("Selecione a conta contrato","",!0,!0)).setAttribute("disabled",!0),h=0;h<v.data.accountContractsCount;h++)g=v.data.accountContracts[h].Endereco,w=v.data.accountContracts[h].Bairro,b=!1,Number(r)===Number(v.data.accountContracts[h].Numero)&&(b=!0),s.options[s.options.length]=new Option("".concat(Number(v.data.accountContracts[h].Numero)," - ").concat(g.toLowerCase().replace(/(?:^|\s)\S/g,(function(e){return e.toUpperCase()})),", ").concat(w.toLowerCase().replace(/(?:^|\s)\S/g,(function(e){return e.toUpperCase()}))),Number(v.data.accountContracts[h].Numero),b,b);if(s.options[s.options.length]=a?new Option("Outra conta contrato","",!0,!0):new Option("Outra conta contrato","",!1,!1),4===d.selectedIndex){for(S=0;S<s.options.length;S++)p="RESERVADO"!==s.options[S].value;p&&(s.options[s.options.length]=new Option("RESERVADO","RESERVADO",!0,!0))}window.validateSelect(s)}else""!==(q=document.querySelector("#project-generator-client-".concat(i))).value&&(q.previousElementSibling.classList.add("d-flex","align-items-center"),q.previousElementSibling.insertAdjacentHTML("beforeend",'\n                <span class="badge bg-danger ms-2" style="font-size: 0.75rem !important">\n                    Verificar credenciais inválidas.\n                </span>\n            ')),u.classList.add("d-none"),l.classList.remove("d-none");case 21:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}(),window.getBeneficiaryClientContractAccounts=function(){var e=d(t().mark((function e(n,o,c){var r,a,i,d,u,l,s,p,f,m,y,v,h,g,w,b,S,q=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=q.length>3&&void 0!==q[3]?q[3]:null,a=q.length>4&&void 0!==q[4]?q[4]:null,null===n||null===o||null===c){e.next=24;break}for(i=n.id.split("-")[5],d=n.id.split("-")[4],u=document.querySelector("#beneficiary-contract-account-select-".concat(d,"-").concat(i)),l=document.querySelector("#beneficiary-contract-account-input-".concat(d,"-").concat(i)),s=document.querySelector("#project-cc-beneficiary-select-".concat(d,"-").concat(i)),p=document.querySelector("#other-beneficiary-contract-account-".concat(d,"-").concat(i)),f="http://equatorial.sunnyhouse.com.br/listAccountContracts",m={user:o,password:c},s.setAttribute("disabled",!0),u.classList.remove("d-none"),l.classList.add("d-none");s.options.length>0;)s.remove(0);return(s.options[s.options.length]=new Option("Carregando...","",!0,!0)).setAttribute("disabled",!0),e.next=19,fetch(f,{method:"POST",headers:{"X-CSRF-TOKEN":$("meta[name='csrf-token']").attr("content"),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(m)});case 19:return y=e.sent,e.next=22,y.json();case 22:if(v=e.sent,y.ok){for(v.data.login=o,v.data.password=c,s.removeAttribute("disabled"),u.classList.remove("d-none"),l.classList.add("d-none");s.options.length>0;)s.remove(0);for((s.options[s.options.length]=new Option("Selecione a conta contrato","",!0,!0)).setAttribute("disabled",!0),h=0;h<v.data.accountContractsCount;h++)g=v.data.accountContracts[h].Endereco,w=v.data.accountContracts[h].Bairro,b=!1,Number(r)===Number(v.data.accountContracts[h].Numero)&&(b=!0),s.options[s.options.length]=new Option("".concat(Number(v.data.accountContracts[h].Numero)," - ").concat(g.toLowerCase().replace(/(?:^|\s)\S/g,(function(e){return e.toUpperCase()})),", ").concat(w.toLowerCase().replace(/(?:^|\s)\S/g,(function(e){return e.toUpperCase()}))),Number(v.data.accountContracts[h].Numero),b,b);a?(s.options[s.options.length]=new Option("Outra conta contrato","",!0,!0),p.classList.remove("d-none")):(s.options[s.options.length]=new Option("Outra conta contrato","",!1,!1),p.classList.add("d-none")),window.validateSelect(s)}else""!==(S=document.querySelector("#project-beneficiary-client-".concat(d,"-").concat(i))).value&&(S.previousElementSibling.classList.add("d-flex","align-items-center"),S.previousElementSibling.insertAdjacentHTML("beforeend",'\n                    <span class="badge bg-danger ms-2" style="font-size: 0.75rem !important">\n                        Verificar credenciais inválidas.\n                    </span>\n                ')),u.classList.add("d-none"),l.classList.remove("d-none");case 24:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}(),window.setSameContractInstallationAddress=function(e){var t,n=e.id.split("-")[4],o=""===document.querySelector("#project-generator-client-".concat(n)).value?document.querySelector("#client").innerText:document.querySelector("#project-generator-client-".concat(n)).value,r=document.querySelector("#loading-client-address-".concat(n)),a=document.querySelector("#chk-default-address-".concat(n)),i=document.querySelector("#btn-add-address"),d=document.querySelector("#address-".concat(n," #generator-contract-account-input-").concat(n)),u=document.querySelector("#address-".concat(n," #project-generator-power-").concat(n)),s=[document.querySelector("#address-".concat(n," #project-cep-").concat(n)),document.querySelector("#address-".concat(n," #project-address-").concat(n)),document.querySelector("#address-".concat(n," #project-number-").concat(n)),document.querySelector("#address-".concat(n," #project-complement-").concat(n)),document.querySelector("#address-".concat(n," #project-neighborhood-").concat(n)),document.querySelector("#address-".concat(n," #project-city-").concat(n)),document.querySelector("#address-".concat(n," #project-state-").concat(n))];(t=d.classList.contains("d-none")?document.querySelector("#address-".concat(n," #project-cc-generator-select-").concat(n)):document.querySelector("#address-".concat(n," #project-cc-generator-input-").concat(n)),e.checked)?(a.setAttribute("disabled",!0),a.previousElementSibling.style.opacity=".5",e.classList.add("d-none"),e.parentNode.style.paddingLeft=0,r.classList.remove("d-none"),d.classList.contains("d-none")?0!==t.selectedIndex&&""!==u.value&&i.removeAttribute("disabled"):""!==t.value&&""!==u.value&&i.removeAttribute("disabled"),function(e,t,n,o,r){$.ajax({headers:{"X-CSRF-TOKEN":$("meta[name='csrf-token']").attr("content")},url:o,type:"GET",dataType:"json",data:n,success:function(n){e.classList.remove("d-none"),e.parentNode.style.paddingLeft="2.5em",t.classList.add("d-none"),n.status?(r.forEach((function(e){for(var t=0,o=Object.entries(n.client);t<o.length;t++){var r=c(o[t],2),a=r[0],i=r[1];e.id.split("-")[1]===a&&(e.value=i.trim())}})),p(r)):l(r)},error:function(e){}})}(e,r,{name:o},url_ajax_get_client_address,s)):(a.removeAttribute("disabled"),a.previousElementSibling.style.opacity="1",i.setAttribute("disabled",!0),l(s))},window.setDefaultGeneratorAddress=function(e){var t,n=e.id.split("-")[3],o=document.querySelector("#loading-default-address-".concat(n)),c=document.querySelector("#chk-same-contract-address-".concat(n)),r=document.querySelector("#btn-add-address"),a=document.querySelector("#address-".concat(n," #generator-contract-account-input-").concat(n)),i=document.querySelector("#address-".concat(n," #project-generator-power-").concat(n)),d=[document.querySelector("#address-".concat(n," #project-cep-").concat(n)),document.querySelector("#address-".concat(n," #project-address-").concat(n)),document.querySelector("#address-".concat(n," #project-number-").concat(n)),document.querySelector("#address-".concat(n," #project-complement-").concat(n)),document.querySelector("#address-".concat(n," #project-neighborhood-").concat(n)),document.querySelector("#address-".concat(n," #project-city-").concat(n)),document.querySelector("#address-".concat(n," #project-state-").concat(n))];t=a.classList.contains("d-none")?document.querySelector("#address-".concat(n," #project-cc-generator-select-").concat(n)):document.querySelector("#address-".concat(n," #project-cc-generator-input-").concat(n)),e.checked?(c.setAttribute("disabled",!0),c.previousElementSibling.style.opacity=".5",e.classList.add("d-none"),e.parentNode.style.paddingLeft=0,o.classList.remove("d-none"),a.classList.contains("d-none")?0!==t.selectedIndex&&""!==i.value&&r.removeAttribute("disabled"):""!==t.value&&""!==i.value&&r.removeAttribute("disabled"),function(e,t,n,o){u.apply(this,arguments)}(e,o,url_get_default_address,d)):(c.removeAttribute("disabled"),c.previousElementSibling.style.opacity="1",r.setAttribute("disabled",!0),l(d))},window.ifInstallationAddressFieldsValueChanges=function(e){var t=e.id.split("-")[2];document.querySelector("#chk-same-contract-address-".concat(t)).checked=!1},window.setDifferentGeneratorContractAccount=function(e){var t=e.id.split("-")[4],n=document.querySelector("#other-generator-contract-account-".concat(t));e.selectedIndex===e.length-1?n.classList.remove("d-none"):(n.classList.add("d-none"),n.value="")},window.handleGeneratorPower=function(e){var t=e.id.split("-")[3],n=document.querySelectorAll("#address-".concat(t,' input[id^="project-beneficiary-rate"]')),o=document.querySelector("#generator-contracted-generation-production-".concat(t)),c=document.querySelector("#generator-estimated-generation-production-".concat(t)),r=document.querySelector("#monthly-avg-generation"),a=document.querySelector("#total-generator-power"),i=1e3*Number(r.innerText),d="kWp"===a.innerText.split(" ")[1]?Number(1e3*a.innerText.split(" ")[0].replace(",",".")):Number(a.innerText.split(" ")[0]),u=Number(1e3*e.value.replace(",","."));o.value=(i/d*u/1e3).toLocaleString("pt-BR",{maximumFractionDigits:2}),c.value=(116*u/1e3).toLocaleString("pt-BR",{maximumFractionDigits:2}),n.forEach((function(e){return window.handleBeneficiaryRate(e)}))},window.handleGeneratorConsumption=function(e){var t=e.id.split("-")[3],n=document.querySelector("#address-".concat(t)),o=document.querySelector("#project-type-".concat(t)),c=document.querySelectorAll("#".concat(n.id,' span[id^="rate-monthly-avg-generation"]')),r=document.querySelectorAll("#".concat(n.id,' input[id^="project-beneficiary-rate"]'));2===o.selectedIndex&&c.forEach((function(n){var o="".concat(n.id.split("-")[4],"-").concat(n.id.split("-")[5]),c=Number(document.querySelector("#generator-contracted-generation-production-".concat(t)).value.replace(".","").replace(",","."));r.forEach((function(t){"".concat(t.id.split("-")[3],"-").concat(t.id.split("-")[4])===o&&(n.innerText="".concat(Number((c-e.value.replace(",","."))*t.value.replace(",",".")/100).toLocaleString("pt-BR",{maximumFractionDigits:2})," kWh"))}))}))},window.getOversizingInfo=function(e){var t=e.id.split("-")[3],n=document.querySelectorAll("#address-".concat(t," [data-equipment-generator]")),c=document.querySelectorAll("#address-".concat(t," [data-equipment-inverter]")),r=document.querySelector("#project-generator-power-".concat(t)),a=document.querySelector("#equipment-oversizing-percentage-".concat(t)),i=o(equipments).map((function(e){if("generator"===e.category)return e.power})).filter((function(e){return void 0!==e})),d=o(n).map((function(e,t){return Number(e.options[e.selectedIndex].value)*i[t]})).reduce((function(e,t){return e+t}),0),u=o(equipments).map((function(e){if("inverter"===e.category)return e.power})).filter((function(e){return void 0!==e})),l=o(c).map((function(e,t){return Number(e.options[e.selectedIndex].value)*u[t]*1e3})).reduce((function(e,t){return e+t}),0);r.value=(d/1e3).toLocaleString("pt-BR",{maximumFractionDigits:2}),window.handleGeneratorPower(r),l>0&&(a.innerHTML="<small>(sobredimensionamento de inversor: ".concat(Math.round(d/l*100),"%)</small>"),a.classList.remove("d-none"))},window.checkIfAddClientBeneficiary=function(e){var t=e.id.split("-")[4],n=e.id.split("-")[5],o=document.querySelector("#generator-contract-account-select-".concat(t)),c=document.querySelector("#chk-add-generator-client-".concat(t)),r=document.querySelector("#project-generator-client-".concat(t)),a=document.querySelector("#client-beneficiary-".concat(t,"-").concat(n)),i=document.querySelector("#".concat(a.id," input")),d=document.querySelector("#beneficiary-contract-account-select-".concat(t,"-").concat(n)),u=document.querySelector("#beneficiary-contract-account-input-".concat(t,"-").concat(n)),l=document.querySelector("#other-beneficiary-contract-account-".concat(t,"-").concat(n));if(i.value="",l.classList.add("d-none"),e.checked?a.classList.remove("d-none"):a.classList.add("d-none"),o.classList.contains("d-none"))d.classList.add("d-none"),u.classList.remove("d-none");else{var s=document.querySelector("#project-cc-beneficiary-select-".concat(t,"-").concat(n));c.checked?window.getBeneficiaryClientCredentials(r,n):window.getBeneficiaryClientContractAccounts(s,contractClientLogin,contractClientPassword)}},window.setDifferentBeneficiaryContractAccount=function(e){var t=e.id.split("-")[4],n=e.id.split("-")[5],o=document.querySelector("#other-beneficiary-contract-account-".concat(t,"-").concat(n));e.selectedIndex===e.length-1?o.classList.remove("d-none"):(o.classList.add("d-none"),o.value="")},window.handleBeneficiaryRate=function(e){var t,n=e.id.split("-")[4],o=e.closest("[data-address-item]"),c=o.id.split("-")[1],r=document.querySelector("#".concat(o.id," #project-type-").concat(c)),a=document.querySelector("#".concat(o.id," #project-generator-consumption-").concat(c)),i=document.querySelector("#rate-monthly-avg-generation-".concat(c,"-").concat(n));2===r.selectedIndex?(t=Number(document.querySelector("#".concat(o.id,' input[id^="generator-contracted-generation-production"]')).value.replace(".","").replace(",",".")),i.innerText="".concat(Number((t-a.value.replace(",","."))*e.value.replace(",",".")/100).toLocaleString("pt-BR",{maximumFractionDigits:2})," kWh")):(t=Number(document.querySelector("#".concat(o.id,' input[id^="generator-contracted-generation-production"]')).value.replace(".","").replace(",",".")),i.innerText="".concat(Number(t*e.value.replace(",",".")/100).toLocaleString("pt-BR",{maximumFractionDigits:2})," kWh"))},window.enableBtnAddAddress=function(e){var t=document.querySelector("#btn-add-address"),n=e.closest("[data-address-item]").id,o=document.querySelector("#".concat(n,' select[id^="project-type"]')),c=document.querySelectorAll("#".concat(n," [data-address]")),r=document.querySelector("#".concat(n,' div[id^="generator-contract-account-input"]')),a=document.querySelector("#".concat(n,' input[id^="project-cc-generator-input"]'));r.classList.contains("d-none")?a.removeAttribute("data-address"):a.setAttribute("data-address",!0),Array.from(c).map((function(e){return""===e.value})).every((function(e){return!1===e}))||0!==o.selectedIndex?t.removeAttribute("disabled"):t.setAttribute("disabled",!0)},window.removeAddressItem=function(e){e.parentNode.parentNode.remove();var t,n,o=document.querySelector("#btn-add-address"),c=document.querySelectorAll("[data-address-item]"),r=document.querySelector("#total-generator-power").innerText.split(" ")[0],a=document.querySelector("#total-generator-power").innerText.split(" ")[1],i=Number("kWp"===a?1e3*r.replace(",","."):r),d=document.querySelector("#project-generator-power-1"),u=document.querySelector("#equipment-quantity-generator-1-1"),l=document.querySelector("#equipment-quantity-inverter-1-2");equipments.forEach((function(e){"generator"===e.category&&(t=e.quantity),"inverter"===e.category&&(n=e.quantity)})),c.length>=1&&o.removeAttribute("disabled"),1===c.length&&(d.value=i,u.value=t,l.value=n),window.handleGeneratorPower(d),window.validateEquipmentQuantity(u),window.validateEquipmentQuantity(l)},window.enableBtnAddBeneficiary=function(e){var t=e.closest("[data-address-item]").id,n=e.closest("[data-beneficiary-item]").id,o=document.querySelector("#".concat(t," .btn-add-beneficiary")),c=document.querySelectorAll("#".concat(n," [data-beneficiary]")),r=document.querySelector("#".concat(n,' div[id^="beneficiary-contract-account-input"]')),a=document.querySelector("#".concat(n,' input[id^="project-cc-beneficiary-input"]'));r.classList.contains("d-none")?a.removeAttribute("data-beneficiary"):a.setAttribute("data-beneficiary",!0),Array.from(c).map((function(e){return""===e.value})).every((function(e){return!1===e}))?o.removeAttribute("disabled"):o.setAttribute("disabled",!0)},window.removeBeneficiaryItem=function(e){var t=e.closest("[data-address-item]").id;e.parentNode.parentNode.remove();var n=document.querySelector("#".concat(t," .btn-add-beneficiary")),o=document.querySelectorAll("#".concat(t," [data-beneficiary-item]")),c=document.querySelector("#".concat(t," [data-beneficiary-item]:first-of-type")),r=document.querySelector("#".concat(c.id,' input[id^="project-beneficiary-rate"]:first-of-type')),a=document.querySelector("#".concat(t,' select[id^="project-type"]'));o.length>=1&&n.removeAttribute("disabled"),1===o.length&&(r.value=100),window.validateBeneficiaryRate(r),window.handleBeneficiaryRate(r),window.validateProjectType(a)},window.validateClient=function(e){var t=e.id.split("-")[2],n=document.querySelector("#client-".concat(t,"-feedback-project"));return clients.find((function(t){return t===e.value}))?(n.innerText="Formato aceito.",f(e,!0),m(n,!0),!0):(n.innerText="Cliente não cadastrado no sistema.",f(e,!1),m(n,!1),!1)},window.validateBeneficiaryClient=function(e){var t=e.id.split("-")[3],n=e.id.split("-")[4],o=document.querySelector("#client-beneficiary-".concat(t,"-").concat(n,"-feedback-project"));return clients.find((function(t){return t===e.value}))?(o.innerText="Formato aceito.",f(e,!0),m(o,!0),!0):(o.innerText="Cliente não cadastrado no sistema.",f(e,!1),m(o,!1),!1)},window.validateProjectType=function(e){var t=e.id.split("-")[2],n=document.querySelector("#type-".concat(t,"-feedback-project"));arrGeneratorHasBeneficiaries.forEach((function(o){return 1===e.selectedIndex&&o.index===Number(t)&&o.qtde_beneficiaries>0&&totalBeneficiaries>0?(n.innerText="Exclua as contas contrato Beneficiárias antes de alterar o tipo para Individual.",f(e,!1),m(n,!1),!1):4===e.selectedIndex&&o.index===Number(t)&&o.qtde_beneficiaries>0&&totalBeneficiaries>0?(n.innerText="Exclua as contas contrato Beneficiárias antes de alterar o tipo para Reservado.",f(e,!1),m(n,!1),!1):(n.innerText="Formato aceito.",f(e,!0),m(n,!0),!0)}))},window.validateCep=function(e){var t=e.id.split("-")[2],n=document.querySelector("#cep-".concat(t,"-feedback-project"));return 0===e.value.split("-").join("").length?(n.innerText="Preencha o campo.",f(e,!1),m(n,!1),!1):e.value.split("-").join("").length<8?(n.innerText="Mínimo de 8 dígitos.",f(e,!1),m(n,!1),!1):(n.innerText="Formato aceito.",f(e,!0),m(n,!0),!0)},window.validateGeneratorConsumption=function(e){var t=e.id.split("-")[3],n=Number(e.value.replace(",",".")),o=document.querySelector("#generator-consumption-".concat(t,"-feedback-project")),c=document.querySelector("#project-type-".concat(t)),r=document.querySelectorAll("span[id^='rate-monthly-avg-generation']"),a=Number(document.querySelector("#generator-contracted-generation-production-".concat(t)).value.replace(".","").replace(",","."));return 0===e.value.length?(o.innerText="Preencha o campo.",f(e,!1),m(o,!1),!1):","===e.value.substr(-1)?(o.innerText="Digite um valor válido.",f(e,!1),m(o,!1),!1):n>a?(o.innerHTML="Digite um valor menor que a <span class='fw-bold'>Produção do kWp Contratado</span>.",f(e,!1),m(o,!1),2===c.selectedIndex&&r.forEach((function(e){return e.innerText="0 kWh"})),!1):(o.innerText="Formato aceito.",f(e,!0),m(o,!0),!0)},window.validateEquipmentQuantity=function(e){var t,n=e.id.split("-")[3],c=e.id.split("-")[4],r=e.id.split("-")[2],a="generator"===r?e.dataset.equipmentGenerator:e.dataset.equipmentInverter,i=document.querySelectorAll("[data-equipment-".concat(r," = '").concat(a,"']")),d=document.querySelector("#equipment-quantity-".concat(r,"-").concat(n,"-").concat(c,"-feedback-project")),u=o(i).reduce((function(e,t){return e+Number(t.options[t.selectedIndex].value)}),0);return equipments.forEach((function(e){e.name.toLowerCase()===a.toLowerCase()&&(t=Number(e.quantity))})),u!==t?(i.forEach((function(e){e.nextElementSibling.innerHTML="A soma das quantidades deve ser igual à quantidade total do produto.",m(e.nextElementSibling,!1)})),!1):0===e.selectedIndex?(d.innerText="Selecione uma opção.",m(d,!1),!1):(i.forEach((function(e){return e.nextElementSibling.innerHTML="Formato aceito.",m(e.nextElementSibling,!0),!0})),d.innerText="Formato aceito.",m(d,!0),!0)},window.validateBeneficiaryRate=function(e){var t=e.id.split("-")[4],n=e.closest("[data-address-item]").id,o=document.querySelector("#beneficiary-rate-".concat(n.split("-")[1],"-").concat(t,"-feedback-project")),c=document.querySelectorAll("#".concat(n,' input[id^="project-beneficiary-rate"]'));return 100!==Array.from(c).reduce((function(e,t){return e+Number(t.value.replace(",","."))}),0)?(c.forEach((function(e){e.parentNode.nextElementSibling.innerHTML="A soma das taxas deve ser igual à <span class='fw-bold'>100%</span>.",f(e,!1),m(e.parentNode.nextElementSibling,!1)})),!1):0===e.value.length?(o.innerText="Preencha o campo.",f(e,!1),m(o,!1),!1):e.value>100?(o.innerText="Digite um valor menor ou igual a 100%",f(e,!1),m(o,!1),!1):0===Number(e.value)?(o.innerText="Digite um valor maior que zero.",f(e,!1),m(o,!1),!1):","===e.value.substr(-1)?(o.innerText="Digite um valor válido.",f(e,!1),m(o,!1),!1):(c.forEach((function(e){e.parentNode.nextElementSibling.innerText="Formato aceito.",f(e,!0),m(e.parentNode.nextElementSibling,!0)})),o.innerText="Formato aceito.",f(e,!0),m(o,!0),!0)},window.validateInput=function(e,t){var n=e.closest(".form-group").lastElementChild;return 0===e.value.length?(n.innerText="Preencha o campo.",f(e,!1),m(n,!1),!1):e.value.length<t?(n.innerText="Mínimo de ".concat(t,1===t?" caractere.":" caracteres."),f(e,!1),m(n,!1),!1):(n.innerText="Formato aceito.",f(e,!0),m(n,!0),!0)},window.validateSelect=function(e){var t=e.closest(".form-group").lastElementChild;return 0===e.selectedIndex?(t.innerText="Escolha uma opção.","equipment"!==e.id.split("-")[0]&&f(e,!1),m(t,!1),!1):(t.innerText="Formato aceito.","equipment"!==e.id.split("-")[0]&&f(e,!0),m(t,!0),!0)},window.fillInAddressFields=function(){var e=d(t().mark((function e(n){var o,c,r,a,i,d,u,l,s,y,v,h,g;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.id.split("-")[2],c=document.querySelector("#address-".concat(o," #project-type-").concat(o)),r=window.validateCep(n),a=document.querySelector("#address-".concat(o," #cep-").concat(o,"-feedback-project")),i=document.querySelector("#address-".concat(o," #project-address-").concat(o)),d=document.querySelector("#address-".concat(o," #project-number-").concat(o)),u=document.querySelector("#address-".concat(o," #project-complement-").concat(o)),l=document.querySelector("#address-".concat(o," #project-neighborhood-").concat(o)),s=document.querySelector("#address-".concat(o," #project-city-").concat(o)),y=document.querySelector("#address-".concat(o," #project-state-").concat(o)),v=[n,i,d,u,l,s,y],0===c.selectedIndex||4===c.selectedIndex){e.next=23;break}if(!r){e.next=22;break}return e.next=15,fetch("https://viacep.com.br/ws/".concat(n.value,"/json/"));case 15:return h=e.sent,e.next=18,h.json();case 18:(g=e.sent).erro?v.forEach((function(e){return e.value=""})):(a.innerText="Formato aceito.",f(n,!0),m(a,!0),i.value=g.logradouro,l.value=g.bairro,s.value=g.localidade,y.value=g.uf),e.next=23;break;case 22:v.forEach((function(e){return e.value=""}));case 23:p(v);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),window.submitFormEditProject=function(){var e,t,n,c,r,a,i=!0,d=document.querySelectorAll("select[id^='project-type']"),u=document.querySelectorAll("input[id^='chk-add-generator-client']"),l=document.querySelectorAll("input[id^='project-client']"),p=document.querySelectorAll("input[id^='project-cep']"),f=document.querySelectorAll("input[id^='project-address']"),m=document.querySelectorAll("input[id^='project-number']"),y=document.querySelectorAll("input[id^='project-neighborhood']"),v=document.querySelectorAll("input[id^='project-city']"),h=document.querySelectorAll("input[id^='project-state']"),g=document.querySelectorAll("div[id^='generator-contract-account-input']"),w=document.querySelectorAll("div[id^='generator-contract-account-select']"),b=document.querySelectorAll("div[id^='other-generator-contract-account']"),S=document.querySelectorAll("select[id^='equipment-quantity-generator']"),q=document.querySelectorAll("select[id^='equipment-quantity-inverter']"),x=document.querySelectorAll("input[id^='chk-add-beneficiary-client']"),j=o(d).every((function(e){return!!window.validateSelect(e)})),L=o(p).every((function(e){return!!window.validateCep(e)})),A=o(f).every((function(e){return!!window.validateInput(e)})),E=o(m).every((function(e){return!!window.validateInput(e)})),C=o(y).every((function(e){return!!window.validateInput(e)})),k=o(v).every((function(e){return!!window.validateInput(e)})),T=o(h).every((function(e){return!!window.validateInput(e)})),N=o(S).every((function(e){return!!window.validateEquipmentQuantity(e)})),I=o(q).every((function(e){return!!window.validateEquipmentQuantity(e)})),O=[];u.forEach((function(e){l.forEach((function(t){e.checked&&e.id.split("-")[3]===t.id.split("-")[2]&&O.push(t)}))}));var _,$,B,R=O.every((function(e){return!!window.validateClient(e)}));return g.forEach((function(t){t.classList.contains("d-none")||(e=document.querySelectorAll("#".concat(t.id,' input[id^="project-cc-generator-input"]')),_=o(e).every((function(e){return!!window.validateInput(e)})),s(),_||(i=!1))})),w.forEach((function(e){e.classList.contains("d-none")||(t=document.querySelectorAll("#".concat(e.id,' select[id^="project-cc-generator-select"]')),$=o(t).every((function(e){return!!window.validateSelect(e)})),s(),$||(i=!1))})),b.forEach((function(e){e.classList.contains("d-none")||(n=document.querySelectorAll("#".concat(e.id,' input[id^="project-other-cc-generator"]')),B=o(n).every((function(e){return!!window.validateInput(e)})),s(),B||(i=!1))})),d.forEach((function(e){var t=e.id.split("-")[2];if(2===e.selectedIndex){var n=o(document.querySelectorAll("#project-generator-consumption-".concat(t))).every((function(e){return!!window.validateGeneratorConsumption(e)}));s(),n||(i=!1)}if(3===e.selectedIndex){var d,u=[];x.forEach((function(e){e.checked&&(d=document.querySelector("#project-beneficiary-client-".concat(t,"-").concat(e.id.split("-")[5])),u.push(d))}));var l=u.every((function(e){return!!window.validateBeneficiaryClient(e)}));s(),l||(i=!1)}if(2===e.selectedIndex||3===e.selectedIndex){var p,f,m;document.querySelectorAll("#address-".concat(t,' div[id^="beneficiary-contract-account-input"]')).forEach((function(e){e.classList.contains("d-none")||(c=document.querySelectorAll("#".concat(e.id,' input[id^="project-cc-beneficiary-input"]')),p=o(c).every((function(e){return!!window.validateInput(e)})),s(),p||(i=!1))})),document.querySelectorAll("#address-".concat(t,' div[id^="beneficiary-contract-account-select"]')).forEach((function(e){e.classList.contains("d-none")||(r=document.querySelectorAll("#".concat(e.id,' select[id^="project-cc-beneficiary-select"]')),f=o(r).every((function(e){return!!window.validateSelect(e)})),s(),f||(i=!1))})),document.querySelectorAll("#address-".concat(t,' div[id^="other-beneficiary-contract-account"]')).forEach((function(e){e.classList.contains("d-none")||(a=document.querySelectorAll("#".concat(e.id,' input[id^="project-other-cc-beneficiary"]')),m=o(a).every((function(e){return!!window.validateInput(e)})),s(),m||(i=!1))}));var y=document.querySelectorAll("#address-".concat(t,' select[id^="project-beneficiary-consumption-class"]')),v=document.querySelectorAll("#address-".concat(t,' input[id^="project-beneficiary-rate"]')),h=document.querySelectorAll("#address-".concat(t,' input[id^="project-beneficiary-address"]')),g=o(y).every((function(e){return!!window.validateSelect(e)})),w=o(v).every((function(e){return!!window.validateBeneficiaryRate(e)})),b=o(h).every((function(e){return!!window.validateInput(e)}));g&&w&&b||(i=!1),s()}})),j&&R&&L&&A&&E&&C&&k&&T&&N&&I||(i=!1),s(),i}})()})();